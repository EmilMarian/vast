FROM python:3.9-slim

WORKDIR /app

COPY attacker_server.py .
RUN mkdir -p payload exfiltrated_data

# Make the server script executable
# RUN /bin/sh -c "apt-get update && apt-get install -y netcat-traditional && tail -f /dev/null"
RUN chmod +x attacker_server.py

# Expose the main HTTP port and the reverse shell port
EXPOSE 63999
EXPOSE 63998

# Run the attacker server
CMD ["python", "attacker_server.py"]